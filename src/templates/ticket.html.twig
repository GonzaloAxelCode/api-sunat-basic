<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <style>
        /* --- CONFIGURACIÓN PARA IMPRESORA TÉRMICA 80mm --- */
        @page {
            size: 80mm auto;
            margin: 0;
        }

        body {
            font-family: "Helvetica Neue", Arial, sans-serif;
            font-size: 14px; /* tipografía más grande */
            width: 76mm;  /* más espacio lateral */
            margin: 0 auto;
            padding: 0 5px; /* márgenes laterales más visibles */
            color: #000;
        }

        .center { text-align: center; }
        .right { text-align: right; }
        .bold { font-weight: bold; }
        .divider { 
            border-top: 1px dashed #444; 
            margin: 8px 0; 
        }
        .header { font-size: 18px; font-weight: bold; } /* encabezados más grandes */
        table { width: 100%; border-collapse: collapse; }
        td { padding: 4px 0; vertical-align: top; }
        .items td { border-bottom: 1px dotted #ccc; padding: 5px 0; }
        .totals td { padding: 4px 0; font-size: 14px; }
        .totals .label { text-align: right; width: 60%; }
        .totals .value { text-align: right; width: 40%; }
        .footer { margin-top: 10px; font-size: 13px; }
        img.qr { margin-top: 10px; }
        .pb { margin-bottom: 14px; }
        img.logo { height: 180px; } /* logo más grande */
    </style>
</head>
<body>

{% set cp = doc.company %}
{% set cl = doc.client %}
{% set moneda = doc.tipoMoneda|catalog('02') %}
{% set name = doc.tipoDoc|catalog('01') %}

<div class="center pb">
    <img class="logo" src="{{ params.system.logo|image_b64 }}">
</div>

<div class="center">
    <div class="header">{{ cp.nombreComercial }}</div>
    <div class="header">{{ cp.razonSocial }}</div>
    <div style="font-size:14px;">RUC: {{ cp.ruc }}</div>
    <div style="font-size:14px;">{{ cp.address.direccion }}</div>
    {% if params.user.header is defined %}
        <div style="font-size:14px;">{{ params.user.header|raw }}</div>
    {% endif %}
</div>

<div class="divider"></div>

<div class="center">
    <div class="bold" style="font-size:16px;">{{ name }} ELECTRÓNICA</div>
    <div style="font-size:15px;">{{ doc.serie }} - {{ doc.correlativo }}</div>
    <div style="font-size:14px;">Fecha: {{ doc.fechaEmision|date('d/m/Y H:i') }}</div>
</div>

<div class="divider"></div>

<div>
    <div><span class="bold">Cliente:</span> {{ cl.rznSocial }}</div>
    <div><span class="bold">{{ cl.tipoDoc|catalog('06') }}:</span> {{ cl.numDoc }}</div>
    {% if cl.address %}
        <div><span class="bold">Dirección:</span> {{ cl.address.direccion }}</div>
    {% endif %}
</div>

<div class="divider"></div>

<table class="items">
    <thead>
        <tr class="bold" style="font-size:14px;">
            <td>Cant</td>
            <td>Descripción</td>
            <td class="right">Total</td>
        </tr>
    </thead>
    <tbody>
        {% for det in doc.details %}
        <tr>
            <td>{{ det.cantidad|n_format }}</td>
            <td>{{ det.descripcion }}</td>
            <td class="right">{{ moneda }} {{ det.mtoValorVenta|n_format }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<div class="divider"></div>

<table class="totals">
    {% if doc.mtoOperGravadas %}
    <tr>
        <td class="label">Op. Gravadas:</td>
        <td class="value">{{ moneda }} {{ doc.mtoOperGravadas|n_format }}</td>
    </tr>
    {% endif %}
    {% if doc.mtoOperExoneradas %}
    <tr>
        <td class="label">Op. Exoneradas:</td>
        <td class="value">{{ moneda }} {{ doc.mtoOperExoneradas|n_format }}</td>
    </tr>
    {% endif %}
    <tr>
        <td class="label">IGV (18%):</td>
        <td class="value">{{ moneda }} {{ doc.mtoIGV|n_format }}</td>
    </tr>
    <tr class="bold" style="font-size:15px;">
        <td class="label">Total:</td>
        <td class="value">{{ moneda }} {{ doc.mtoImpVenta|n_format }}</td>
    </tr>
</table>

<div class="divider"></div>

<div>
    <span class="bold" style="font-size:14px;">Son:</span> {{ legend(doc.legends, '1000') }}
</div>

<div class="divider"></div>

<div class="center footer">
    {% if params.system.hash is defined and params.system.hash %}
        <div><strong>Hash:</strong> {{ params.system.hash }}</div>
    {% endif %}
    <img class="qr" src="{{ qrCode(doc)|image_b64('svg+xml') }}" width="130"><br>
    <div style="font-size:14px;">¡Gracias por su compra!</div>
    <div style="font-size:13px;">Representación impresa de la {{ name }} ELECTRÓNICA</div>
</div>

</body>
</html>
