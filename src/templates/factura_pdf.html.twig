<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <style type="text/css">
        {% include 'assets/style.css' %}
    </style>
</head>
<body class="white-bg">
{% set cp = doc.company %}
{% set isInvoice = doc.tipoDoc == '01' %}
{% set isNota = doc.tipoDoc in ['07', '08'] %}
{% set isAnticipo = doc.totalAnticipos is defined and doc.totalAnticipos > 0 %}
{% set name = 'FACTURA' %}
<table width="100%">
    <tbody>
        <tr>
            <td style="padding:30px; !important">
                <table width="100%" height="150px" border="0" align="center" cellpadding="0" cellspacing="0">
                    <tbody>
                        <tr>
                            <td height="140" align="left">
                                <span><img src="{{ params.system.logo|image_b64 }}" height="140" width="160" style="text-align:center" border="0"></span>
                            </td>
                            <td width="5%" height="40" align="center"></td>
                            <td width="45%" rowspan="2" valign="bottom" style="padding-left:0">
                                <div class="tabla_borde">
                                    <table width="100%" border="0" height="200" cellpadding="6" cellspacing="0">
                                        <tbody>
                                            <tr>
                                                <td align="center">
                                                    <span style="font-family:Tahoma, Geneva, sans-serif; font-size:29px" text-align="center">{{ name }}</span>
                                                    <br>
                                                    <span style="font-family:Tahoma, Geneva, sans-serif; font-size:19px" text-align="center">E L E C T R Ó N I C A</span>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td align="center">
                                                    <span style="font-size:15px" text-align="center">R.U.C.: {{ cp.ruc }}</span>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td align="center">
                                                    <span style="font-size:24px">{{ doc.serie }}-{{ doc.correlativo }}</span>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td valign="bottom" style="padding-left:0">
                                <div class="tabla_borde">
                                    <table width="96%" height="100%" border="0" cellpadding="9" cellspacing="0">
                                        <tbody>
                                            <tr>
                                                <td align="left">
                                                    <strong><span style="font-size:16px;padding-bottom:6px">{{ cp.nombreComercial }}</span></strong>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td align="left"><strong>Razón Social Emisor:</strong> {{ cp.razonSocial }}</td>
                                            </tr>
                                            <tr>
                                                <td align="left"><strong>Dirección:</strong> {{ cp.address.direccion }}</td>
                                            </tr>
                                            <tr>
                                                <td align="left">{{ params.user.header|raw }}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <div class="tabla_borde">
                    {% set cl = doc.client %}
                    <table width="100%" border="0" cellpadding="5" cellspacing="0">
                        <tbody>
                            <tr>
                                <td width="60%" align="left"><strong>Razón Social Receptor:</strong> {{ cl.rznSocial }}</td>
                                <td width="40%" align="left"><strong>{{ cl.tipoDoc|catalog('06') }}:</strong> {{ cl.numDoc }}</td>
                            </tr>
                            <tr>
                                <td width="60%" align="left">
                                    <strong>Fecha Emisión:</strong> {{ doc.fechaEmision|date('d/m/Y') }}
                                    {% if doc.fechaEmision|date('H:i:s') != '00:00:00' %} {{ doc.fechaEmision|date('H:i:s') }} {% endif %}
                                    {% if doc.fecVencimiento is defined and doc.fecVencimiento %}
                                        <br><br><strong>Fecha Vencimiento:</strong> {{ doc.fecVencimiento|date('d/m/Y') }}
                                    {% endif %}
                                </td>
                                <td width="40%" align="left"><strong>Dirección:</strong> {% if cl.address %}{{ cl.address.direccion }}{% endif %}</td>
                            </tr>
                            <tr>
                                <td width="60%" align="left"><strong>Tipo Moneda:</strong> {{ doc.tipoMoneda|catalog('021') }}</td>
                                <td width="40%" align="left">{% if doc.compra is defined and doc.compra %}<strong>O/C:</strong> {{ doc.compra }}{% endif %}</td>
                            </tr>
                            {% if doc.guias %}
                            <tr>
                                <td width="60%" align="left"><strong>Guías:</strong>
                                {% for guia in doc.guias %}
                                    {{ guia.nroDoc }}&nbsp;&nbsp;
                                {% endfor %}
                                </td>
                                <td width="40%"></td>
                            </tr>
                            {% endif %}
                        </tbody>
                    </table>
                </div><br>

                {% set moneda = doc.tipoMoneda|catalog('02') %}
                <div class="tabla_borde">
                    <table width="100%" border="0" cellpadding="5" cellspacing="0">
                        <tbody>
                            <tr>
                                <td align="center" class="bold">Cantidad</td>
                                <td align="center" class="bold">Código</td>
                                <td align="center" class="bold">Descripción</td>
                                <td align="center" class="bold">Valor Unitario</td>
                                <td align="center" class="bold">Valor Total</td>
                            </tr>
                            {% for det in doc.details %}
                            <tr class="border_top">
                                <td align="center">{{ det.cantidad|n_format }} {{ det.unidad }}</td>
                                <td align="center">{{ det.codProducto }}</td>
                                <td align="center" width="300px"><span>{{ det.descripcion }}</span><br></td>
                                <td align="center">{{ moneda }} {{ det.mtoValorUnitario|n_format }}</td>
                                <td align="center">{{ moneda }} {{ det.mtoValorVenta|n_format }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>

                <table width="100%" border="0" cellpadding="0" cellspacing="0">
                    <tbody>
                        <tr>
                            <td width="50%" valign="top">
                                <table width="100%" border="0" cellpadding="5" cellspacing="0">
                                    <tbody>
                                        <tr>
                                            <td colspan="4">
                                                <br><br>
                                                <span style="font-family:Tahoma, Geneva, sans-serif; font-size:12px"><strong>{{ legend(doc.legends, '1000') }}</strong></span>
                                                <br><br>
                                                <strong>Información Adicional</strong>
<br>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
  <table width="100%" border="0" cellpadding="5" cellspacing="0">
                            <tbody>
                            <tr class="border_top">
                                <td width="30%" style="font-size: 10px;">
                                    LEYENDA:
                                </td>
                                <td width="70%" style="font-size: 10px;">
                                           {{ legend(doc.legends, '1000') }}
                                </td>
                            </tr>
                            {% if isInvoice and doc.detraccion %}
                            <tr class="border_top">
                                <td width="30%" style="font-size: 10px;">
                                    TIPO DE DETRACCIÓN:
                                </td>
                                <td width="70%" style="font-size: 10px;">
                                    {{ doc.detraccion.codBienDetraccion }} - {{ doc.detraccion.codBienDetraccion|catalog('54') }}
                                </td>
                            </tr>
                            <tr>
                                <td width="30%" style="font-size: 10px;">
                                    MEDIO DE PAGO:
                                </td>
                                <td width="70%" style="font-size: 10px;">
                                    {{ doc.detraccion.codMedioPago }} - {{ doc.detraccion.codMedioPago|catalog('59') }}
                                </td>
                            </tr>
                            <tr>
                                <td width="30%" style="font-size: 10px;">
                                    N° CTA. BANCO NAC:
                                </td>
                                <td width="70%" style="font-size: 10px;">
                                    {{ doc.detraccion.ctaBanco }}
                                </td>
                            </tr>
                            {% endif %}
                            {% if isNota %}
                            <tr class="border_top">
                                <td width="30%" style="font-size: 10px;">
                                    MOTIVO DE EMISIÓN:
                                </td>
                                <td width="70%" style="font-size: 10px;">
                                    {{ doc.desMotivo }}
                                </td>
                           </tr>
                            {% endif %}
                            {% if params.user.extras is defined %}
                                {% for item in params.user.extras %}
                                    <tr class="border_top">
                                        <td width="30%" style="font-size: 10px;">
                                            {{ item.name|upper }}:
                                        </td>
                                        <td width="70%" style="font-size: 10px;">
                                            {{ item.value }}
                                        </td>
                                    </tr>
                                {% endfor %}
                            {% endif %}
                            </tbody>
                        </table>
                                {% if isInvoice and doc.detraccion %}
                                <table width="100%" border="0" cellpadding="5" cellspacing="0" style="font-size: 10px;">
                                    <tbody>
                                        <tr class="border_top">
                                            <td width="30%">TIPO DE DETRACCIÓN:</td>
                                            <td width="70%">{{ doc.detraccion.codBienDetraccion }} - {{ doc.detraccion.codBienDetraccion|catalog('54') }}</td>
                                        </tr>
                                        <tr>
                                            <td width="30%">MEDIO DE PAGO:</td>
                                            <td width="70%">{{ doc.detraccion.codMedioPago }} - {{ doc.detraccion.codMedioPago|catalog('59') }}</td>
                                        </tr>
                                        <tr>
                                            <td width="30%">N° CTA. BANCO NAC:</td>
                                            <td width="70%">{{ doc.detraccion.ctaBanco }}</td>
                                        </tr>
                                    </tbody>
                                </table>
                                {% endif %}
                            </td>

                            <td width="50%" valign="top">
                                <br>
                                <table width="100%" border="0" cellpadding="0" cellspacing="0" class="table table-valores-totales">
                                    <tbody>
                                        {% if doc.mtoOperGravadas %}
                                        <tr><td align="right"><strong>Op. Gravadas:</strong></td><td align="right">{{ moneda }} {{ doc.mtoOperGravadas|n_format }}</td></tr>
                                        {% endif %}
                                        {% if doc.mtoOperExoneradas %}
                                        <tr><td align="right"><strong>Op. Exoneradas:</strong></td><td align="right">{{ moneda }} {{ doc.mtoOperExoneradas|n_format }}</td></tr>
                                        {% endif %}
                                        <tr><td align="right"><strong>I.G.V.{% if params.user.numIGV is defined %} {{ params.user.numIGV }}%{% endif %}:</strong></td><td align="right">{{ moneda }} {{ doc.mtoIGV|n_format }}</td></tr>
                                        <tr><td align="right"><strong>Precio Venta:</strong></td><td align="right"><span id="ride-importeTotal">{{ moneda }} {{ doc.mtoImpVenta|n_format }}</span></td></tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <br><br>
                <div>
                    <hr style="height: 1px; border: 0; border-top: 1px solid #666; margin: 20px 0;">
                    <table width="100%" border="0" cellpadding="0" cellspacing="0">
                        <tbody>
                            <tr>
                                <td width="85%">
                                    <blockquote>
                                        {% if params.user.footer is defined %}
                                            {{ params.user.footer|raw }}
                                        {% endif %}
                                        {% if params.system.hash is defined and params.system.hash %}
                                            <strong>Resumen:</strong> {{ params.system.hash }}<br>
                                        {% endif %}
                                        <span>Representación Impresa de la FACTURA ELECTRÓNICA.</span>
                                    </blockquote>
                                </td>
                                <td width="15%" align="right">
                                    <img src="{{ qrCode(doc)|image_b64('svg+xml') }}" alt="Qr Image">
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </td>
        </tr>
    </tbody>
</table>
</body>
</html>
